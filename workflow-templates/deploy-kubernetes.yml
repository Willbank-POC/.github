name: Deploy Kubernetes
run-name: ${{ github.actor }} deploy kubernetes ${{ github.run_number }}
on:
  workflow_dispatch:
    inputs:
      ENVIRONMENT:
        type: choice
        description: 'Environment to run pipeline.'     
        required: false
        default: development
        options: 
          - development
          - staging
          - production

permissions:
  id-token: write
  contents: write
  actions: write

jobs:
  template:
    uses: will-bank/workflow-templates/.github/workflows/deploy-kubernetes.yaml@main     
    with:
      ENVIRONMENT: ${{ github.event.inputs.ENVIRONMENT }}
    secrets:
      PLATFORMS_TOKEN: ${{ secrets.WILLBANK_PLATFORMS_PERSONAL_ACCESS_TOKEN }}
